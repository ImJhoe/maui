<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="CitasMedicasApp.Views.CambiarPasswordPage"
             xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:CitasMedicasApp.ViewModels"
             x:DataType="vm:CambiarPasswordViewModel"
             Title="{Binding Title}">

    <ScrollView Padding="20">
        <StackLayout Spacing="20">

            <!-- Header -->
            <Frame BackgroundColor="{AppThemeBinding Light=#E8F5E8, Dark=#1B4D1B}"
                   HasShadow="True" 
                   CornerRadius="10" 
                   Padding="20">
                <StackLayout Spacing="10">
                    <Label Text="Cambiar Contraseña" 
                           FontSize="20" 
                           FontAttributes="Bold"
                           TextColor="{AppThemeBinding Light=#2E7D32, Dark=#4CAF50}"
                           HorizontalOptions="Center" />
                    <Label Text="Por seguridad, ingrese su contraseña actual y la nueva contraseña" 
                           FontSize="14" 
                           TextColor="{AppThemeBinding Light=#1B5E20, Dark=#66BB6A}"
                           HorizontalOptions="Center"
                           HorizontalTextAlignment="Center" />
                </StackLayout>
            </Frame>

            <!-- Formulario -->
            <Frame BackgroundColor="{AppThemeBinding Light=White, Dark=#333}"
                   HasShadow="True" 
                   CornerRadius="10" 
                   Padding="20">
                <StackLayout Spacing="20">

                    <!-- Contraseña actual -->
                    <StackLayout Spacing="5">
                        <Label Text="Contraseña Actual:" 
                               FontSize="14" 
                               FontAttributes="Bold" />
                        <Entry Text="{Binding CurrentPassword}" 
                               Placeholder="Ingrese su contraseña actual"
                               IsPassword="True"
                               ReturnType="Next" />
                    </StackLayout>

                    <BoxView HeightRequest="1" BackgroundColor="#E0E0E0" />

                    <!-- Nueva contraseña -->
                    <StackLayout Spacing="5">
                        <Label Text="Nueva Contraseña:" 
                               FontSize="14" 
                               FontAttributes="Bold" />
                        <Entry Text="{Binding NewPassword}" 
                               Placeholder="Mínimo 6 caracteres"
                               IsPassword="True"
                               ReturnType="Next" />
                        <Label Text="Mínimo 6 caracteres" 
                               FontSize="11" 
                               TextColor="{AppThemeBinding Light=#666, Dark=#999}" />
                    </StackLayout>

                    <!-- Confirmar contraseña -->
                    <StackLayout Spacing="5">
                        <Label Text="Confirmar Nueva Contraseña:" 
                               FontSize="14" 
                               FontAttributes="Bold" />
                        <Entry Text="{Binding ConfirmPassword}" 
                               Placeholder="Repita la nueva contraseña"
                               IsPassword="True"
                               ReturnType="Done" />
                    </StackLayout>

                </StackLayout>
            </Frame>

            <!-- Botones -->
            <StackLayout Spacing="10">
                <Button Text="CAMBIAR CONTRASEÑA" 
                       Command="{Binding CambiarPasswordCommand}"
                       BackgroundColor="{AppThemeBinding Light=#2E7D32, Dark=#4CAF50}"
                       TextColor="White"
                       FontAttributes="Bold"
                       FontSize="16"
                       HeightRequest="50"
                       CornerRadius="25" />

                <Button Text="CANCELAR" 
                       Command="{Binding VolverCommand}"
                       BackgroundColor="{AppThemeBinding Light=#757575, Dark=#616161}"
                       TextColor="White"
                       FontSize="14"
                       HeightRequest="45"
                       CornerRadius="22" />
            </StackLayout>

            <!-- Loading indicator -->
            <ActivityIndicator IsVisible="{Binding IsBusy}" 
                              IsRunning="{Binding IsBusy}"
                              Color="{AppThemeBinding Light=#2E7D32, Dark=#4CAF50}" />

        </StackLayout>
    </ScrollView>

</ContentPage>